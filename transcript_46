
Search our transcripts by guest or keyword
COMPANY
Careers
Blog
Shows
Sponsors
Newsletter
About Us
Sitemap
LEGAL
Disclaimer
Privacy Policy
Terms and Conditions
SOCIAL
LinkedIn
Twitter
® 2022 Colossus, LLC. All rights reserved.
Released December 13th, 2021
Invest Like the Best
Doug Colkitt - The Evolution of Markets
Doug Colkitt is a high-frequency trader and builder of the decentralized exchange, CrocSwap. We cover the evolution of market infrastructure, the mechanics of Automated Market Makers (AMMs), and the new category of single contract DEXs that Doug is building.

00:00:00
01:17:07
Introduction
[00:02:34] Patrick: Our guest today is Doug Colkitt. Doug has spent his career searching for and trading inefficient markets, first at Citadel's high frequency trading group, then for himself and then as an operator building CrocSwap, a decentralized exchange, or DEX, designed to bring modern functionality to crypto markets, which is closer to what large traders have come to expect from a modern electronic market like the NASDAQ. My interest in market infrastructure has continued to grow since my great conversation with FTX founder, Sam Bankman-Fried.

So my conversation with Doug covers the evolution of market and trading infrastructure. We unpack the trading stack as it exists today, dive into DeFi's innovations and explore the new category of single contract DEXs that Doug is creating. After learning so much from Doug about how markets function and how crypto markets should function, I became an investor in his new business by my venture capital firm, Positive Sum. Please enjoy this great conversation with Doug Colkitt.

Doug's Background & The Trading Stack
[00:03:31] Patrick: So, Doug, this is going to be a really unique episode. You've been one of the people that's taught me most about the world of market infrastructure and how important it is to functioning markets, but also how interesting it is to traders, investment strategies, crypto, which we're going to spend a lot of time on. I think because you've had a really unique personal history, it's probably the right place to start with just a thumbnail sketch of the major stops of your career up through this point because I want to lay out for the audience why you're the right person to talk about the evolution of markets and why this kind of emerging space is so interesting.

[00:04:06] Doug: Studied computer science and finance in school, and then out of school, I started working for a hedge fund, Citadel. Most people have heard of them.

[00:04:17] Patrick: Stealer of constitutions.

[00:04:20] Doug: Yeah. Maybe not the most popular nowadays, but definitely some of the smartest people out there. So I was really lucky to start my career there and learn from some of the best people in the industry. It was actually around 2008 when the financial crisis, everything was going to hell, including most of Citadel, but the one group there that was consistently making money, making a ton of money was the HFT group. So it was the space everyone wanted to be in, especially around that time. So I joined the HFT group there, initially working on what they call alpha signals, which was statistical modeling to predict where the market's going over the short term. Was at Citadel a few years and then left right around the flash crash. I decided just to go out on my own and see if I could build the whole stack myself. Originally, I was trading at the CME, trading the index futures and the bond futures for a while. That was pretty competitive. I decided, "Okay, that's the most competitive area. Let see if I can get a toehold there. Then if I can trade that, I can trade anywhere."

Over time, just those markets kept getting more and more competitive. So for reference, I think at one point, I was the only actual individual, not a trading firm, who was authorized direct market access to the CME. Right? So you normally, to trade, you have to go through a broker and you go through everything. But the small subset of people, usually trading firms are authorized to directly enter their orders and do the exchange. There's a whole process to go through there, so you don't break the exchange. So at one point, I think I was the only individual. Then randomly connected with some people who were operating in Turkey. This was right after their market went fully electronic or modern electronic infrastructure. I met them just randomly online, but they were looking for someone on the quant side to help out, build there. So went in a partnership there. We were trading Turkish equities. I don't know anything about Turkey. So I'd trade these stocks. I wouldn't even know what the symbols were. I said the other day, I just found out some symbol that was one of their most profitable. I always thought it was a soccer team or a football club. Turned out it was a steel company. But that's the nature of HFT, where you don't necessarily care about the underlying stocks, so much as you care about the market and price formation.

So was in Turkey for a few years. Again, similar story, right? When they started being fully electronic, was very easy for one man show or a small team to make money. Then over time, things keep becoming more competitive. So you either have to say, "Oh, we're going to consolidate or we're going to make big investments on the infrastructure to scale up." So right around DeFi summer in summer of 2020, just very randomly read an article online about, and this was even before they called it MEV, or at least as far as I was aware, they weren't calling it MEV. So I thought that was interesting. I said, "Let me just try making this as a hobby," and I did. Then the bot just, it started working pretty well. Was doing very, very well there for a while, putting more and more time into it and it took over everything. From summer 2020 until spring 2021, right around when these new generation of DEXes come out, just for reference, the way DEXes work is, or at least in the Ethereum spaces, they use this automated market maker system, which is instead of having active traders on the full order book that you'd see in a traditional market, liquidity providers put in their capital, put in a whole bunch of capital in each side. Then they just have the simple algorithm that balances on adjust the price to keep supply and demand in line. Simple mechanism, but works, especially in constraint blockchain.

This next generation of Uniswap introduces this concept of concentrated liquidity. Instead of just putting it in your capital and forgetting it, you put in your capital, but you set the price range that you want to trade at. As you can imagine, this starts looking a lot more like a limit order book. It's not quite the same, but you have this concept. Okay, I'm putting in a price, putting an order at a certain price, and then I'm a liquidity provider. Maybe I change that price around. The one thing that you're missing in traditional AMMs is liquidity providers aren't contributing price discovery, whereas in NASDAQ or something, liquidity providers are one of the most active participants in the price discovery process. So I'm looking at this and thinking, "Hey, this is actually very similar to something I know about. I know how that process unfolds." So I look at that and then decide, "Well, maybe I think there's a lot of advances there, but I think there's actually opportunity to improve on the model." That's when I start my project CrocSwap at the time, and have been working on that ever since, and then hopefully, will be out pretty soon and people will be able to use it.

[00:08:54] Patrick: It's such a cool history. The right place to go from here is to discuss what I'll call the past, present, and future of, I think you called it the stack. I'd love to introduce some basic concepts and then build on those things to really hopefully have people that are less familiar with some of these topics, walk away, able to understand what is going on in the world of HFT, liquidity, provision market makers. These are terms that everyone's heard, but I don't think really understands what's going on under the hood.

So maybe you could begin by just describing what you mean by a stack. Let's go all the way to the most matured. I go inside of jump or some very sophisticated HFT market making firm that's trading modern electronic markets. What is literally happening inside those firms? Why are they contributing to price discovery? I want to talk about the limit order book here as a technology. I want to talk about their infrastructure. Just give us a sense of the most mature, what they look like today.

[00:09:49] Doug: If somebody really wants to understand this field on intuitive level, I always say is, start with ... I don't know if you've ever seen those shows about pawn shops. All the same concepts that apply on those pawn shops shows, it's the same concept. At any given time, some people want to buy, and some people want to sell. But most people, they just want to buy right now or they want to sell right now. They don't want to come in and wait around. That introduces this whole concept. You need a market maker. You need somebody who's willing to stand in there, be willing to buy when people want to sell, and visa versa.

If I'm running a pawn shop, they're always low balling. People come in and they low ball them. They don't pay the full value. They have to pay a little bit less than full value. That's because a number of reasons. Number one, after they buy it, they have to go put it in their inventory. They have to go put it in the back room and wait until somebody sells it. So that costs capital, and that's risk, where you have to commit that. You have to pay the overhead, all your employees in the store and everything for that process. People don't come into the store to sell the best stuff. They're just selling junk. People are always giving you their worst stuff and giving you your low ball offers.

So market maker world, we call that toxicity. So you say, okay, people are trying to trade against you, but mostly they're probably trying to trade against you in the wrong direction. If there's bad news on, say, Microsoft tomorrow, there's going to be a big rush to sell Microsoft. So if you're just the market maker, put your orders out there. If that happens, probably your buy orders are going to get filled a lot sooner than your sell orders. So all of a sudden, you're sitting on a bunch of shares of Microsoft, and Microsoft is going down.

So market makers also have to be very aware of what's going on, on a macro level, but more even so, on a micro level. What they're basically doing is they're looking at the market on a very low level and saying, "Okay, there's way too much flow this way. That doesn't look like a normal market. I need to adjust my quotes. I need to get paid more because there's more risk for that." So because of that, you have to build up a very complex infrastructure, always be watching every market something's trading on, generating, all signals and to predict where things are going.

So I always go back to the pawn shop analogy, that somebody comes in, they want to sell something weird. The pawn shop guy's calling up 100 different people. He always knows somebody how to value baseball cards. So same thing. Market makers have to build up this infrastructure to value things, but more importantly to detect when markets are moving. It's obviously very easy if markets aren't moving to, "Okay, let me buy at $10 and sell at $11." That's theoretically an easy business. But the problem is if you buy at $10 and the market moves down and you have to sell at $9, then you lose money.

So look at a big trading firm. They're hiring a lot of very quantitative people to number one, build the infrastructure, build the technology. The technology has to be very reliable. It has to be fast because they're also competing with each other in the sense that there might be an opportunity out there or they want to compete to get their quotes out before other people do, because there's also, you get priority as your quotes get entered faster. So that's a whole other game, in terms of that. You hear about high frequency traders are always obsessed with latency and shaving off microseconds or nanoseconds, just because exchanges give you higher priority for the sooner you get your order into the exchange. So they have to build that.

They also have to build these quantitative models to trade something and predict where stocks are going on a very short term, because generally, these firms don't keep big inventories. They're mostly in the business of balancing out order flow on one minute to 10 minutes. They don't want to take a huge position at the end of the day, because that's not their business. There may be other people who will step in at that, but they're mostly there to turn over their portfolio very fast, and that keeps their exposure to longer term trends down. But they're very good at looking at the limit order book and the order flow to predict where things are going.

[00:13:40] Patrick: The limit order book question for just a minute, I think it'll be an interesting one to explore whether or not that's the end all/be all of market technology. But just to dig in a little bit more, if I was coming to this for the first time, I might have the question, "Geez, this sounds like a really risky proposition that without real deep knowledge of, let's say, Microsoft in this case." You're Turkey example, right?

[00:14:02] Doug: Yeah.

[00:14:02] Patrick: That was a sports team and it was a steel company, right? Knowing the businesses that are being traded is actually not that relevant. Actively, these firms may not have a view or really an understanding even of the businesses. So it sounds quite risky. Yet many of the best HFT firms, their sharp ratio, or however you want to measure, is incredibly high.

[00:14:20] Doug: You never have losing days.

[00:14:21] Patrick: They never have a losing day. Just explain how that's possible in a little bit more detail. Is it the quantitative signals, the infrastructure, a combination of the two?Why is it such a reliable money-making model? I guess, obviously what are the returns to scale? Because if it was this easy, everyone would do it.

[00:14:36] Doug: Say you have a coin and say it's a bias coin. So it comes up 51% of the time or heads 51% of the time, tails 49% of the time. If you just flipped it one time, you wouldn't bet that much money on it. You have a small edge, but you could lose very easily. So you're not going to bet a huge amount of money on that. But now, let's say instead of flipping it one time, we flip it 10,000 times and we say whoever gets their side, gets more win. So if I'm flipping a coin 10,000 times, I have a 51% edge, even though your edge on any individual flip is small, you're going to win this bet with very, very high probability. So when you look at a firm and you say, "Okay, how do they make money every single trading day?"

The answer is they're not making money on every single trade. They're making money on 51% of their trades, but doing 10,000, 100,000 trades a day. Statistically, the law of large numbers says that, okay, it's going to be very predictable when you execute at that size. So obviously, that's how things work when things are going well. The problem is it's not easy to get to the point where you have 51%. The one nice thing about HFT is in traditional asset management, you could have a strategy and you could think, "Okay, we're making money." Then over time, it might take months, might take years until you realize, "Oh, we're not doing as well as we thought we would." HFT, you can turn it on, and you'll say, "Okay."

[00:15:56] Patrick: A week later.

[00:15:57] Doug: Yeah, 30 minutes. "Okay, this doesn't work. I got to turn it off." So it's definitely not a case that you're guaranteed to make money because there's a whole risk to build up the infrastructure. I have to build these models, and knock them out in a half hour. You're investing a lot in building up the company and the infrastructure and the models. It's definitely hard to get to the point where you're profitable at all. But once you are profitable, you're probably profitable every day just because you're making so many trades over time, and that averages up.

[00:16:26] Patrick: So let's talk about that 51%. So what are the things at the cutting edge and the traditional mature markets that people are doing. You don't have to name super specific proprietary things or anything like that, but what is the nature of the models, the sorts of data, the sorts of features, the sorts of labels in these studies that lead to that 51 percentage? Where might that come from for one of the firms that's able to achieve it?

[00:16:52] Doug: The one misconception is that all HFTs are market makers or liquidity providers, and that's actually not true. Actually, some of the most profitable HFT strategies are quite the opposite, liquidity takers. What that means is just going back to the example, at any given point in the market, there's a bid which is the best price you can sell at if you want to sell immediately, the best resting buy order and ask which is the best price you can buy at immediately, the lowest resting sell order. Liquidity providers are putting their orders out there and letting them sit, and people are coming in and trading against them. So one basic way to make money is to do that.

Put your orders out there, wait for people to buy low, sell high, be patient for people to come in and balance your inventory that way. That's what we call at making or liquidity providing. But a lot of HFT firms actually make their money, they immediately cross the spread. So they're going in. They're actually paying that premium to trade right away. That almost seems counterintuitive. Why would that make money over time? But what they're doing when they're building statistical models and they're looking at differences. So the simplest one you can imagine is they're the S&P index futures. They trade in Chicago, right? Then there's New York Stock Exchange, the NASDAQ. That's in New York. That's where the actual stocks inside the S&P 500 trade.

So if you have a very fast connection to Chicago, the index futures are much more liquid. The stocks tend to move along with them, right? You can watch those index futures. When the price on those futures move, those contracts move, you can use that to say, "Let me go buy up a bunch of stocks right now, before they go up." Oftentimes, firms that are willing to cross the spread can make a lot of money, sometimes even more money, than firms that are market making it. There are other things. Sometimes those firms get not necessarily vilified, but people don't give them as much respect because they say, "Okay, market makers are providing liquidity. What are these firms doing?" But often, they're contributing to this price discovery process.

[00:18:44] Patrick: When you went to rebuild the full stack by yourself, what are the pieces of that? So what are the literal mechanical parts of infrastructure? How do you classify them?

[00:18:54] Doug: Our code base and maybe 100,000 lines of code or whatever. The actual strategy side, the glamorous side of it is maybe 10% of it. Maybe 15% of it. There's a ton of work that just goes on getting the data feeds, right? The data feeds from the exchanges are not optimized to be easy to consume. They're optimized to be fast, but you have to listen to the exchange. You miss a message, there's a whole process to regenerate, and it's bad. You don't want to do that. Make sure you integrate all the messages, build limit order book and your representations fast, obviously, the strategy that we talked about.

Even just simple things, almost that you think are dumb can actually be fiendishly complex. So going back to it, you might be putting your orders and interface with the strategy, the exchange gateway and say, "Okay, here's my order. Let me put it out there and process it." Then you have to keep track of it. You might put your order in. But one thing that's actually pretty hard to do is you put your order in, and then your order comes through that data feed. It doesn't tell you, "Oh, these orders belong to you" and just that-

[00:19:55] Patrick: This one's your order.

[00:19:57] Doug: Yeah. So you might get in. "Okay, I'm responding. Oh, this guy's bidding at the same price as me and maybe he got in before me. So I'm going to bid up. Maybe you get into a dumb feedback loop, trading against yourself. It's not that simple because sometimes the data feed comes in faster. Sometimes you get - because they're two different systems - sometimes you get the confirmation faster. So it's almost like a distributed systems problem from computer science. Some of these things are pretty hard to solve on because the way things are delivered, the order they're delivered in, isn't guaranteed at all. And these systems have been pushed to be so fast that oftentimes you have to make these decisions in a pretty high performant way.

[00:20:33] Patrick: So ultimately, it's about like so many data science problems. Some large chunk of the problem is getting the data, cleaning the data, handling it, speed, moving stuff around. And then like you said, only 10% or 15% of the actual code base might be the strategy itself.

[00:20:50] Doug: Yeah. The actual ideas. Even on the back testing it, it's not easy to build. But simulator for this, you almost have to build the entire exchange yourself so you can run it.

[00:20:59] Patrick: And what are the classes of data that matter in this world? There's order book data, there's price, there's volume. Mentioned many times like the abstraction that you could sort of think about the actual stocks with.

[00:21:09] Doug: At these horizons, there's not a ton of things you can actually look at. If I'm trading on a, like I said, maybe even if you're holding time as minutes, but really, or maybe you're holding time as even seconds, but a lot of your horizon comes within milliseconds, maybe 100 milliseconds of when you can very quickly ... Your trade has to move in the right way within like 100 milliseconds or you're probably not going to make money. At that frequency, there's not a ton of data you can look at. The news doesn't come out every 100 milliseconds and really not much happens every other 100 milliseconds.

All that really happens at that frequency is orders come in, the book changes and other stocks move. So I'd say those three things. The order book, the order flow, which is the rate that orders are coming out and the price of other, not just stocks, other related security. So how other, if you're looking at Microsoft, you might want to see what's going on in Intel or vice versa. You have to get very creative in terms of how you drill those. Because those aren't simple numbers, just plug those into a spreadsheet. There's all kinds of ways to dice and measure those things.

[00:22:10] Patrick: And then finally, how do you think about returns in this style of, I won't call it investing. I'll call it trading. What is good returns? What are limits on capacity? What are limits on free cashflow from a strategy like this? What is great?

[00:22:24] Doug: Returns are going to be very high and they're almost irrelevant, whether your returns are 500% a year or 2000% a year, which might actually be something you'll see. But nobody's really going in and say, oh, I want 2000% a year instead of 500% a year. Because like you say, capacity constraints are by far the biggest limit. Right? You have sharp ratios, which are 30, crazy high sharp ratios. You're not optimizing for risk or capital. You're optimizing for, I have a team of, whatever, five, 10 people, and I need to make this much to pay them, put food on the table, pay for all my infrastructure. So really most people are thinking in terms of what are my revenue.

[00:23:06] Patrick: P & L?

[00:23:07] Doug: Yeah, exactly. P & L. It's like running a grocery store. The grocery stores aren't thinking about their sharp ratio. They're just thinking about, oh, this is how much business we're doing a day. This is how much revenue. This is how much we need to pay our fixed costs. So, in that sense, it's actually of kind of more prosaic than a lot of other strategies.

[00:23:22] Patrick: And what is that capacity? Just thumb in the air? How much do you think like the industry print and revenue or free cash flow? Pick your metric.

[00:23:29] Doug: It depends to what you classify as HFT, right, because you can start going out longer horizons and the capacity increases, but so does the risk and then you're back in the traditional putting on risk. I'd say probably in the US, probably this year is actually better, but maybe a few billion a year for US equities. And then if you want to go out longer, right? You could look at something like Renaissance medallion, which isn't necessarily HFP. But I think starts getting somewhere in between like what I'll call StatArb, which is longer term HFT and maybe a little bit longer horizon, but obviously the returns are very consistent over time. And they might do over $5 billion, just one fund. So depending how you define it, it could be anywhere from $2 to $20 billion, I guess. It's kind of a big range.

Market Making & AMMs
[00:24:15] Patrick: I'd love now to hear your thoughts, just riffing a little bit on the importance of market making as I like a function in markets and the technology of the limit order book itself. You raised an interesting question one time, which was basically like, is this the final technology? Like is this the best underlying piece of infrastructure that drives markets that we can think of? Or might there be a different way of doing this? And so I'd love you just to riff on the pros and cons, I guess, of the limit order book as a technology, sort of where it came from and what the future might hold.

[00:24:45] Doug: Well, you said actually in the beginning, it's pretty interesting. What is the benefit of market making? What's the benefit of liquidity? And a lot of people criticize locally why are all these rocket scientists working for trading firms? They could be curing restless leg syndrome instead, or something like that. Liquidity is important because I have some security and I want to go to sell it, going back to it. If I want to sell it to you, right, and there's not a agreed upon price, it's pretty hard for us to do that deal if there's no kind of market, because you don't know, okay, what does this guy know that I don't know, what's like a normal size. Is this like a weird trade? If somebody calls you at 2:00 PM and wants to sell you a million shares of Microsoft, you say, okay. Somebody calls you at 2:00 in the morning and wants to sell you a million shares of Microsoft, you say, okay. I don't know. That seems kind of sketchy. I don't know if I want to be on the other side of that function because there is no market open and kind of doing something weird.

Liquidity is important, right, because it kind of generates this continuous price over time. And even if you're not using it, it's important to have it so that like anyone could just look at the market and say, okay, this is the fair price. There's kind of this ongoing price discovery that happens. And when that breaks, that's kind of a hard thing to restore, which is actually you look in the markets, in the mornings, when they open, liquidity is always a lot less. It's always a lot more expensive to trade. Prices move. So people have debated 24/7 markets or not. In terms of the limit order book, I think it's been a very successful technology and it's been very good. And before it, just sort of context, it used to be this dealer system and you call up some guy at Nice and he has the whole thing just on his book or whatever. It depends on the market. But it wasn't very transparent. And I think there was a lot of opportunities for it. Not necessarily shenanigans, but people didn't necessarily see what was going on.

One of the biggest advances with the limit order book, it's very transparent. Here are all the orders. Everyone can see them. If you put it in, you'll get matched against in this priority. We define it ahead of time. And obviously it's a very elegant technology. It matches people in real time. It's exceedingly solvable. The biggest challenge to it today is going back to these automated market maker systems. And they're not perfect, but one thing they've done very, very well on is less liquid, longer tail of assets. So we were talking about HFT firms and it's very high touch operation. And so you look at the stock market today, most of the volumes and the very, very biggest themes and small caps are very thinly traded just because nobody wants to deal with the headache of running a strategy and some name that might only trade like a few times a day is just too much to kind of maintain. The limit order book there, maintain all your quotes, adjust them.

So one of the nice thing of about, and it made it very automatic. So you don't have to have professional liquidity providers. People can just put their money in and there's this mechanism that automatically balances things and for things that might only trade a couple times a day. I think it's been a very successful mechanism. Now, I think limit order books are still better for things that are liquid, but kind of a lesson there where liquidity that isn't professional democratic access to liquidity providing is pretty useful in certain cases and something to be thought of. And maybe the problem with limit ordered books is they kind of lock out somebody who just wants to come in and say, I want to provide liquidity. I'm willing to buy when people want to sell, I'm willing to sell when people want to buy, but I don't have 10 million to go set up a trading firm in Chicago. I want to put $10,000 instead. And maybe I don't want 30 sharp returns, but maybe one sharp returns to do that. Right? Because I'm willing to step in.

So there's really no kind of on ramp for somebody who wants to do something like that. And even in very liquid markets, you can see this because the problems we have with moderate systems is right, you have flash crashes where things work very, very well until, going back to all these HFP firms, they don't hold huge inventory. So when they get completely filled in one direction, there's no quotes left and nobody's invested in the infrastructure to quote automatically. So they're huge profit opportunities, but nobody's stepping in and putting prices back in line to just because access is so undemocratic to that strategy.

[00:28:44] Patrick: Maybe talk through the literal mechanics of automated market making. If it is an innovation that improves on the limit order book, at least in certain parts of the market, I think it's worth spending a minute understanding literally what is happening. So I think limit order book is self explanatory, right? It's a matching engine, orders go in, they're intelligently matched, like you said, with a pre-defined rule set. So it's like, I'll call it like a very fair system. And all it relies upon is that the orders going in are not, I guess there could be problems with those. They could be spoofed. They could be something wrong with that. Maybe that's worth spending a minute on. But let's use that to contrast against what literally is going on inside of an AMM. So just walk us through this new technology, the literal mechanics.

[00:29:28] Doug: A very classical AMM. This was actually Vitalik, the founder of Ethereum. He just kind of made up a blog post and came up with this whole mechanism, just brilliant guy. Okay. Here's just the mechanism, someone go build it. And then they did and was successful. So the mechanics are classical system, very simple. It's what's called a constant product curve and it's a pair. So, let's just think euros and dollars. So think, okay, Microsoft trades, but really Microsoft trades is a pair against dollars. So sometimes it's easier to think in terms of a pair or 4x because that's we have euros and we have dollars and there's always an equal amount of value between the two in the pool. So just say for now, one Euro equals $1. So we put in a 1000 euros, we put in a $1000, they're equal value and we have an equal amount.

And then let's say you come in and you say, I want to convert $100 to euros. So what you're going to do is you go to the pool, tell the pool, okay, here's a $100. The pool's going to try to balance that. The pool's going to determine how many euros can I give you and it's going to try to balance that. So the pool's going to give you about 100 euros back because they're about equal value. That's fair, but it's going to give you actually a few less euros back. I don't know. You can do the math and balance it out. But at the end of the day, right, the pool's going to have about $1,100 in it and 900 euros because you put your $100 in it. Now there's 900 euros left and now the prices changed and because there's more dollars and fewer euros, that means the price of euros has gone up in that ratio.

It's a very simple mechanism where the price is just adjusting based on the ratio of the assets in it and it's always just keeping that product the same. Where that falls down is it's not that capital efficient. And you can think of something where maybe the price doesn't deviate too much. Like I think of say dollars against something that's almost always equal to a dollar. The problem is you have to put in equal amounts of both sides. It has to be able to support any price from zero to infinity, but maybe the thing you trade only trades between 99 cents to a dollar or right there are these kind of dollar "stable coins." And theoretically they're always pegged to a dollar. So if you have $2 stable coins trading against each other, it's kind of inefficient to put all this capital in there from zero to infinity because the price is probably never going to step outside of this narrow boundary.

[00:31:52] Patrick: So if I'm a liquidity provider in an AMM, going to keep referring back to kind of your examples that you've given to have some continuity here. I'm the person with $10,000, not the $10 million I need in Chicago.

[00:32:04] Doug: Right.

[00:32:05] Patrick: And I want to go earn, almost feels like a yield, on that $10,000 by contributing. Let's say it's a Ether Bitcoin pair, just to bridge into the crypto world a little bit here. I've got Bitcoin. I'm willing to put Bitcoin into this pool. And what you're saying is it's capital inefficient, because if it's the full curve, because I'm just sort of blindly putting, I don't know, 10 Bitcoin in there or something. And then I'm the liquidity provider and the price is handled for me. If someone wants to trade, they will want Bitcoin and they have Ether and they want to do a trade. Just sort of doing it on my behalf and giving me some benefit.

[00:32:40] Doug: Yeah. You can think of one as doing it on your behalf. It would probably be easier conceptual way is that you contribute to the pool and then you own some Pro rata share of the pool and then that pool's going to accumulate. Like you mentioned, I actually forgot to mention the original example, right? The AMMs charge usually a fixed percent. So they have some fee. So when someone comes into trade, they get that, but they also pay a percentage fee on top of that. And that might be somewhere, let's just say with 0.1%. So you also pay fee to trade and that's exactly what you're alluding to. Right? You earn a yield because as a contributor of capital to that pool, you receive your Pro rata share of the fees that the pool generates.

Now, on the other side, it's the same problem a traditional market maker faces. You're always trading in the direction that people don't want to trade on it. Going back to that Bitcoin Ether thing, if the price of Bitcoin is rising relative to Ether, that means traders are going to be coming in, buying Bitcoin out of the pool, putting Ether into the pool. So the pool's always rebalancing in the wrong direction. So people have kind of worked out the math with this, but the function instead of having a linear exposure to the underlying assets, a square root exposure. So the price of Bitcoin quadruples, right? You might only get 2 X that return, but exchange, you're getting this yield on your capital in the pool.

[00:33:59] Patrick: Sorry for all the questions poking and prodding at this new way. I do think it's important because so much of the decentralized exchanges in crypto are automated market making systems. If this becomes, then obviously we're going to talk about what you're building in a minute here, with CrocSwap. But if this becomes a dominant technology for trading digital assets, the way it works matters.

So if I'm putting the, same example, the 10 Bitcoin, into the pool. Is a way of thinking about this, that this is sort of just decentralized inventory contribution. We're just relying on, rather than a single firm, we're just sort of gathering all the necessary inventory to do these pair trades. And like in your early example, there's a bid, there's an ask and there's a spread and the market maker is providing liquidity in that spread. So therefore, we're sort of just doing the same thing, but the inventory is just coming from a lot of different places.

[00:34:51] Doug: Yeah. That's definitely a component of it. Because obviously if I'm trading Bitcoin to get Ethereum rate, there has to be Ethereum there for me. Part of what you're getting compensated for is exactly what you said. I have this, I'm providing it to people, this inventory, to people who are willing to get it. But I don't want to overlook the price discovery impact here. Because if you go to markets, most of the trades, crypto markets or traditional markets, most of the trading at any given time isn't trading because people actually like need that asset. We could look at the CME people trading oil. Most of those people trading oil futures are not actually going to be taking delivery of oil in 30 days. They're there basically to express a view on the price. Crypto markets, you can kind of see these perpetuals, which are kind of analogous to futures, have taken over a lot of the market share and there's no delivery there. There's no way to express view on the price.

So the other way to think about it, I think, is that the LPs are betting that the price won't deviate too much between the two, because the LPs are sitting there. And as long as the price, some people call it impermanent, what I described before, how you can move and then you're always kind of moving on the wrong side. Some people call that impermanent loss because in an AMM context, as long as the price comes back to the original price, you won't lose anything. And some people think maybe that's not a great marketing term because maybe it hides the fact that yeah, you could lose out on that if it doesn't move back. But we'll call it impermanent loss or IL. In some sense, if I'm a liquidity provider in AMM, I'm short IL. I'm betting that the price isn't going to deviate too much or the ratio between these assets. So Bitcoin won't deviate too much from Ethereum in terms of the ratio of their price. So being an IL is kind of expressing a view in that sense. I think this price is stable. I'm betting on it being stable. It really is relative to how many other people are betting on.

Evolution of AMMs
[00:36:42] Patrick: So now we can talk about the evolution or iteration of the technology of DEXs as you see it. I know you left, you had this experience with trading Turkish equities. There was an opportunity there. You were enticed back by the DeFi opportunity as a trader first, trying to make P & L for yourself, and building a lot of infrastructure to accomplish that. But then you sort of shifted your interest towards being an infrastructure builder or supplier provider, or however you want to talk about it, because you saw an opportunity to improve on some of the state of these decentralized exchanges that are fueling so much of the volume of the crypto world.

So before we get to CrocSwap and the ways in which you and I have talked about this really cool category name for what you've created, which we're calling single contract decentralized exchange or decks. I want to understand exactly what that means. But first just walk us through what have been the evolutions of AMMs themself that are meaningful. So if it started as this capital inefficient, zero to infinity price, talk about what's happened since and who originated AMM in the first place. You mentioned Vitalik, but who commercialized it with the greatest success or what are the big players out there and how have they gotten better through time?

[00:37:50] Doug: After Vitalik threw out the idea, the first AMM was Uniswap. Hayden Adams from Uniswap. I think the legend is he kind of read that blog post, said, oh, let me just put that together. And then Uniswap was born. And it's really hard to overstate the growth rate in this category. So even like a year ago, the whole space is grown probably more than 1000% in just the past year or so. Going back to like the beginning of 2020, this was a very, very niche field. So you had a lot of different protocols, but to be honest, right, it wasn't a huge amount in a volume. So to have Uniswap and they pioneered and a lot of people said, ah, this will never work. Nobody will use it. And they kind of showed, yeah, actually people will use it. There's actually a lot of demand, especially what we talked about, that long tail of ...

[00:38:32] Patrick: Stuff not on Coinbase.

[00:38:34] Doug: Exactly. Because traditionally you came up with a token, right? You have to get listed by Coinbase or Binance or whatever. And until you do, you actually have very little liquidity and started to buy it, it's hard to sell it. So it was kind of revolutionary in the sense that what Uniswap did and this whole space did, is permissionless. So you don't have to go to Uniswap and get approved to list your token. You can just go create your own pool. You just interact with the protocol and nobody's going to stop you. So I think that was pretty revolutionary and drove a lot of growth. And then in 2020, the space kind of starts exploding. Number of protocols. They came along but one of the big ones is Curve and going back to it. They were, I think, the first people to tackle this capital inefficiency problem and Curve very narrowly focuses on, I want to say narrow, but this is obviously a huge segment of the market.

They focus on payers where the price is stable. So like for example, you have USD Key and USDC, which are both pegged to $1. Putting the full curve on that doesn't really make much sense. So Curve use is kind of a different method. Same idea, the same curve, but it kind of pretends, oh, we have more capital than we do, but that's fine because the price never deviates too much. So it's much more efficient in terms of you don't need as much capital to support trading. So Curve has been very successful in the space. I think they kind of showed that there's ways to iterate on this core idea. Obviously, in the Solana space, it's kind of a different blockchain. So people have innovated there and give them a lot of credit in terms of Solana blockchain itself has a lot higher throughput than Ethereum, so in Solana you can stand up full limit order books, and they actually have full limit order books running on that blockchain. But the problem is you're not interfacing with Ethereum where maybe 90, 95% of the organic user activity is, but I think they innovated a lot in showing, Hey, you can actually run full order books in a DeFi context that will work as well.

I'd state Uniswap V3 itself, Uniswap kind of innovated on themselves, so you got to give them a lot of credit for that. What is pretty revolutionary... And Uniswap V3 isn't necessarily an automated market maker anymore because there is a lot more complexity in this concentrated liquidity idea where instead of providing liquidity from zero to infinity, I'm going to pick my price. So I'm going to provide liquidity from 80 cents to $1.20 or whatever, right? And I only have to contribute capital to cover that range, and then theoretically I'll gain all the fees in that range, but if it goes outside that range... I think people are still trying to figure out that model. I think we have to build better tooling, but I'm pretty bullish on concentrated liquidity in terms of, I think price discovery is better, and I think ultimately liquidity will be better than the classical AMF for a lot of cases. Maybe not necessarily for the less liquid cases, but for a lot of the more liquid cases.

[00:41:19] Patrick: How do you think that crypto market participants that are not infrastructure builders that could never dream of building a DEX, but nonetheless are interested in DeFi and maybe being a liquidity provider should think about this? Like this maybe is where we could talk for a minute about the amount of assets that are in these protocols. We could talk about staking and the returns to staking. What is the perspective of the asset holder that wants to be involved in this system? What do you think they should expect? How should they approach all these protocols and tools?

[00:41:49] Doug: I guess I'd preface it that there's probably a huge range. When you say that it could be anyone from someone from 500 bucks that they want to earn some money onto multi-billion dollar hedge funds. And the whole range is actually in the space now, for sure. I think most people are probably approaching it as a income yield product and you're thinking, okay, I'm in crypto, I have these assets and I want to generate a yield on them. And most of it's understanding the risk factors to staking, and kind of what we talked about before with IL, and what are you exposed to and what do your cash flows look like.

So I think that's probably the first thing because a lot of people take the simplistic view, "Okay. Here, let me just look at my APYs, my yields on like every single pool," but some of the pools come with more risk on different sides than other pools. So I think ultimately there's going to be better tooling and better frameworks, but there's probably major room for improvement in the pace. Just kind of translating, better communicating, maybe coming up with more of a common language than just, oh, the yield is here, the yield is that, but papering over some of the IL issues I think this space could improve on a lot.

[00:42:55] Patrick: When we think about the function of a protocol like a Uniswap, that's fully decentralized and permissionless, Uniswap has a native token. And I think one of the things to always ask about crypto protocols is the relationship between the job being done and the native token of the protocol. I'm just using Uniswap because it's the most well known example. What is the function of a native token for a decentralized exchange protocol? Why does that need to exist?

[00:43:20] Doug: Native token is almost shares in the company. Just go back, NASDAQ. There's NASDAQ the exchange, but there's also NASDAQ the stock. The stock itself trades on NASDAQ the exchange. So same thing, there's Uniswap the protocol, and then there's Uniswap the token. The Uniswap the token also trades on Uniswap the DEX protocol. So basically these native tokens behave almost the same way that stock in a company would behave. They're almost like equity in the protocol. So number one, they entitle you to revenue generated by the protocol. Most of them do, some are revenue list, but most of these protocols, a certain percent of the fees generated go to the token owners and like any other company, that's the cash flow. That's the cash flow series, discounted cash flow. You can model that. The other thing is they give you governance. A lot of these tokens will have certain parameters that you can change around.

For example, Uniswap has different fee tiers. So you're allowed to create a pool with a 0.3% fee. There's a pool with a 0.05% fee, and just the other day, they voted on a pool with a 0.01% fee. That was a vote by the token holders. So somebody created a proposal and then anyone who held Uniswap tokens could vote on the proposal, and then it was approved. Now the protocol supports 0.01% fee. So you can also think those are like governance rights in stock. You can vote for board members. Where that gets interesting though is DeFi is... It takes finance and then does a bunch of crazy stuff on top. Where it gets interesting is sometimes certain cases, people have created tokens that strip the voting rights away from the cash flow, right? So people will sell those. And Curve is an example of this.

So Curve will give out rewards inside it with its native token and so support certain pools over other pools. So if you're a token and you want to get a lot of liquidity, obviously it helps it, Curve boost your rewards on top of that. Now there's this whole market where people stripped out voting rights on Curve token, and they're selling those. And then new tokens are buying those to get their tokens supported on Curve, but then you're still getting the income on it. So there's all kinds of iterations of that game being played in DeFi world, which is kind of interesting, kind of fun.

[00:45:25] Patrick: I think it's fascinating, right? It's like live experimentation of the speed of crypto in terms of governance and organization of capital. What do you think about the ways in which someone can earn, let's say a Uniswap token, a UNI token? Just maybe enumerate the ways that you could do it. Obviously, you could buy it on Uniswap itself. How do the tokens originally get distributed and are there ways to earn them without just buying them in a market and holding them because they're associated with some yield?

[00:45:53] Doug: When people create these tokens, whatever the original team, the original investors, some are allocated to them, like any startup. Mark Zuckerberg has a certain per cent of Facebook shares or whatever. Generally, these tokens are community. So you don't want to understake how important community is in the DeFi space. People like using protocols that they culturally associate with. So generally these protocols try to decentralize, which means getting their tokens out to a community of people who really believe in the project and want to be attached to it and have some sense of ownership over it. So we were talking about Uniswap, specifically the way they got their community-owned tokens out to the market was they did something called an airdrop. So basically they didn't actually have a token up until last fall, but to anyone who used Uniswap prior to that, or in a certain way, they basically looked up...

The nice thing about the blockchain, everything's transparent. You can see all the addresses that have used Uniswap. They went through before and said, "Okay, these are all our users up to this date." Without previously announcing it, all of a sudden, every one of those users had so many Uniswap airdrop tokens in their address when they woke up the next morning. And I think you can look up, it's over 10,000. A lot of money because some of these people are just small traders and then got these big airdrops. So it was kind of a nice benefit for them. So there's airdrops and that's I think the most classical way. Uniswap did not, but most protocols now do something called liquidity mining rewards. And that's basically where they have a special incentive program where somebody is staking liquidity or using the protocol in somewhere contributing capital protocol, contributing liquidity, and going back, we were talking about fees and not only are you receiving fees generated from the exchange, but you're also receiving native tokens for providing liquidity.

So it'd almost be like if I was a market maker at NASDAQ and every day I made a market, NASDAQ gave me X number of NASDAQ shares for making the market that day, I guess would be the closest analogy. Another fun example in this space was something called a vampire attack that SushiSwap... So SushiSwap is kind of a competitor to Uniswap and they got very big, very quick because they did something called the vampire attack and this was last fall. They cloned Uniswap. So it said, "We're the same functionality as Uniswap. Come use us. If you move your liquidity from Uniswap to SushiSwap on this date, you'll get a huge number of SushiSwap tokens," and overnight they stole almost 50% of Uniswap's market share with that scheme. Uniswap didn't have a token before then, and that's actually kind of what kicked them into high gear and did the airdrops. So all kinds of politics there.

[00:48:31] Patrick: I just love these little details. So let's imagine that Uniswap did have one of these reward programs. If I'm a liquidity provider on Uniswap, I've provided Bitcoin, let's say to a pool, how am I receiving my fees? So let's just say, it's one of those pools that has the 0.01% fee or whatever on trading. Am I receiving that in Bitcoin and ETH something else? Like what is the actual way that I'm receiving payment for my service, for my provision of liquidity?

[00:48:55] Doug: You're providing capital in that pool, and then that pool is collecting the trading fees. It depends. The old V2 is slightly different than the V3, but basically there's a pot of trading fees that accumulate over time. And then the mechanism will say, okay, you entered the pool whatever today. And you exited it a week later, and this was like the accumulated rewards rate when you started, and this was the accumulative rewards rate when you ended, so here's the net rewards over the time that you were active. And so here's your pro rata share from contributing that.

[00:49:27] Patrick: And which currency are those calculated or they're received in?

[00:49:31] Doug: These pools actually give you the option. I can pay in Ethereum, or I can pay in Bitcoin. So the pools will accumulate rewards on both sides, depending how the traders... That might also be a different thing, right? It'd almost be like if you were trading Microsoft on NASDAQ and NASDAQ, you obviously pay your fees in dollars, but it'd almost be like, if I could pay my fees in Microsoft shares. Trade a million Microsoft shares, I pay my... Here's five Microsoft shares. So you can accumulate rewards on both sides of the [payers/pairs] . And then every liquidity mining program's different, but it will say something. If you were providing liquidity over this period, you'll get X number of Uniswap tokens for every X units of liquidity you provide it for ever long, and then you just multiply that out, and they say, "Okay, you put in here, you took out here. We also owe you these number of Uniswap tokens for contributing to the pool."

[00:50:17] Patrick: And then the way that the cash flow associated with holding a UNI token works is what? Just on some interval, I have a right to some part of their overall revenue or something?

[00:50:28] Doug: UNI has actually not technically turned on their protocol fee yet. It's built into the code and they will turn it on, but they technically haven't turned it on yet. But so you go back, there's a 0.3% pool. So let's say you come in as a trader and you want to convert, to make the math simple, one Eth equals one Bitcoin. So here's a hundred Eth, give me my Bitcoin, and I'll pay the fee in Bitcoin. So you put in a hundred Eth, you get a hundred Bitcoin back, but you're going to also pay a fee in Bitcoin. So really you get 99.7 Bitcoin back. So the pool keeps 0.3%, 0.3 Bitcoin for itself. So of that, some fraction goes to the liquidity providers in the pool. So it's usually one six is the take rate. 0.25 Bitcoin will go to reward the people in the pool, and 0.05 Bitcoin will go to quote unquote protocol fees, and those protocol fees are basically profits for the UNI stakeholders. And then that will accumulate to a treasury, and then either that can be paid out like a dividend, or it can be reinvested into all kinds of things like any company.

Single Contract DEX
[00:51:30] Patrick: Fascinating. Okay. We have done an incredible amount of setup to get to a new category, which we're calling single contract DEX. And I'd just love to hear how you think about this category, why you've gone to the effort to build a new decentralized exchange with all this unique knowledge that you bring to the table. So what was so interesting to me when I met you was this deep background in HFT and market making in the most mature electronic markets. Maybe one of the first things you said to me was, "Look, like in five years, I would expect that the DEX world feels to a big sophisticated market maker like NASDAQ does. What if we can be a part of that transition?" So just talk me through at a high level, what CrocSwap is going to do and do differently than others. And then we'll get into this idea of a single contract DEX, which obviously implies that other DEX are not single contract, why that's important and what it unlocks.

[00:52:21] Doug: Number one, I think concentrated liquidity is the future and because of all kinds of reasons, it's a lot more advantageous. So the first thing CrocSwap wants to enable is take that change with concentrated liquidity and push it further, and what does that mean? Number one, I think things need to be a lot more frictionless. So I don't think we talked about this, but on the blockchain, take any type of action. There's what's called quote unquote gas fees, which are basically the blockchain itself will... They're not paid to UNI. They're not paid to liquidity providers. They're paid to the minors or eventually the validators, but to include data or action, Ethereum's like a computer, right? So to do any type of action on -

[00:53:00] Patrick: Like a database. A ledger, yeah.

[00:53:01] Doug: Yeah, exactly. It's like a database and to do action on the database, like same as like AWS, you pay to take action. So as demand for Ethereum has gone up, unfortunately the gas fees have gone up and people are working on scale and solutions, but they're never going to be free. It's always going to cost money to take any action. One of the issues with concentrated liquidity is the gas fees unfortunately have been pretty high. And I think that's kind of hurt this idea of active price discovery. AMMs have kind of worked in this very high cost gas environment because you put in your liquidity, you set it, you forget it, you come back a year later, and maybe the gas fees aren't too bad because you're only doing it once. Right? But let's think of like what a high frequency trader looks like in a traditional market. Literally you might cancel 99% of your orders, so that means to do one trade, I have to do a hundred different actions, a hundred different transactions.

If something looks like that, I have to do a hundred different transactions on the blockchain if I want something that really looks like high frequency trading, so that's incongruous with high gas fees. So one thing we're trying to build CrocSwap is to make it much easier for what a high frequency trader would look when they're quoting something like this. And you might look at, okay, I do want to put in a range order, I do have some view on the price, but I want to be able to change that pretty quickly. And so I need to be able to change the price. And also maybe I need to be able to change my fee tier.

And that's almost like widening the spread or narrowing the spread because when you look, like the pools have different fee tiers, you might say, "Okay, I want the lowest fee tier when I think the price isn't going to move a bunch because I'm just going to be collecting a bunch, but I want a higher fee tier because I want to get paid more because I think the price might move a lot more in the next 30 minutes or whatever. So I need to be compensated more for my liquidity."

A high frequency trader would be looking at something like this and I'm saying, how can I make this active? How can I move things around a lot? And unfortunately the current DEXs either don't support concentrated liquidity, or if they do and you try to do it, there's all kinds of frictions that exist at kind of this active liquidity provider. So CrocSwap is basically taking those frictions away from a number of different angles. But first and foremost, going to this idea of a single contract DEX, I think is very important because taking a step back as far as I know, every DEX is... Every pool is a different smart contract.

The problem with that is if I want to move anything from... And say, going back to the example, I want to move from the Bitcoin Eth but instead of being at 0.3% fee tier, I want to be at 0.05% fee tier. To change my quote, I actually have to take my liquidity out of the higher pool, burn my position, take it out. All those tokens come back to me. That constitutes a lot of gas costs to transfer those tokens. Then I have to go and transfer those tokens to the other pool. And I'm paying a bunch of gas to move there. In a high frequency world, that'd just be very simple. Narrow the spread, widen the spread. You can do that a hundred times a second. That's a very heavyweight operation for something that should be a lightweight operation.

With single contract DEX you don't need to do that because pools themselves live on the same contract. So there's still internal data structures that track those pools, but luckily the single contract DEX can just say, okay, this is how much, net out the position. So you can execute this long string, arbitrarily long string of actions and narrow the positions at the end. That significantly lowers the frictions to kind of that active liquidity provider.

[00:56:18] Patrick: I think it's both gas fees and also even something like taxes.

[00:56:22] Doug: Yeah. Every time you do any of these transactions, another example is, just talking about the liquidity provider side, but let's even just say... Or even on that side, right? Every time you do one of those things, that creates a taxable event because technically the tokens go from the pool back to you and then back to another pool. And you technically have to realize that creates a taxable event. And then that potentially creates all kinds of downstream tax effects if you were holding the tokens somewhere else. Another example I always use is oftentimes when you're trading from say X to Y, there's not a pool between X and Y.

There's usually a pool between X and Eth, and Eth and Y. So in anything, you may say, "Okay, trade token X, give me Eth, I'll send the Eth back, and then give me token Y." Okay. But now you're receiving Eth from the pool, which has nothing to do with your trade. You just want to convert X to Y. I'm sending Eth back. You have a taxable event in Eth because there's an up and down transfer to your address, and if you were holding Eth in your investment account somewhere else, you have to realize the profit on that if you're using first in by full accounting. So that creates all of these deleterious tax effects and as more institutions get into it, that's obviously going to be a bigger issue. So in terms of avoiding frictions on that side, is also undervalued.

[00:57:35] Patrick: What made this possible? It just seems so obvious that if you could have every payer and sort of, like you said, any arbitrary, new thing you wanted to do in a DEX all happen in a single contract and therefore pay way less in gas and pay way less in tax, it seems like the obvious way to do it. So why didn't others do it this way? And how are you able to do it?

[00:57:56] Doug: A lot of pain and suffering basically in the engineering to get it there. Ethereum basically imposes a limit on how big any single contract can be and that's to keep the blockchain healthy. There's all kinds of reasons you can talk about, but long story short, Ethereum imposes kind of this limit on... A smart contract's basically a program that exists on the blockchain. So you can't make the program, you can't make the smart contract bigger than this size. So it says like 24 kilobytes. So I always want to say, there's a story like the original developers, like super Mario on the original Nintendo, and they were trying to fit all their code in, and actually some of the level code apparently was also program code. So they're trying to make their program code also appear as like blocks or turtles or whatever. But I always want to say, I want to find those guys and hire them, because I'm sure they'd be great Ethereum developers, just a lot of engineering.

And that's where it's kind of been... Going back, when I was doing MEV trading because that's obviously, you kind of compete on gas usage there, and you're kind of trying to push the limits of Ethereum engineering. So used a number of tricks from there and even actually in general, in high frequency trading... So one thing that employed on CrocSwap is this concept of the hot path and the cold path. And that actually comes from high frequency trading because when you're engineering things to be very low latency, you want to think very carefully about, okay, this is what I do 99% of the time. So if I can make this 10% faster at the cost of making the 1% case two times slower, that's a great trade off to make. So I think you kind of just have to understand the entire stack from bottom to top to know what are the trade offs I can make and whether these trade offs are worth it or not.

[00:59:26] Patrick: What is the impact of all this? What do you estimate the improvement or reduction, I guess, in friction will be as a result of this single everything happening in one contract and improving on the way the DEXs work today? What will it mean for its users?

[00:59:43] Doug: For the trader side, in terms of the gas cost, 10 to 20% lower, and actually we can get up to 25% lower fees on that. Because with a single contract DEX, also the cool thing you can do is you can hold your collateral directly at the DEX. So going back to if I actually need the Ethereum out, I can take it out. But if I'm just there to engage in price discovery, I want to trade Bitcoin against Ethereum and I'd want to do 30 trades a day, 300 trades a day. There's no reason for me to keep sending these tokens back and forth to me. I can just say, "Hey, totally exchange. Can you hold the balance for me? Don't bother transferring the tokens. I'll take the tokens out at the end of the day. We'll settle up."

Which is kind of how markets work. When I trade Microsoft on NASDAQ, Microsoft doesn't go in and out. Just NASDAQ, we settle up at the end of the day. So, you can get 20 to 25% cheaper for active trading. But on the LP side, really excited because over 50% reduction on the gas fees and in some cases as much as 70% if we're talking about these, I want to move my quotes around.

[01:00:42] Patrick: Well, set aside taxes is yet another advantage for taxable traders and providers, but those are huge numbers. What impact do you think that has? Typically when you reduce frictions, it has non-linear impacts on behavior and activity in technology. Reduce 50%, you don't expect double the activity, it's something way, way larger than that. So, do you think of the liquidity providers as your customer and that it just so happens that because of this much more efficient way of building this thing, that traders also benefit?

[01:01:12] Doug: Everybody's really a customer. One of the things of building a market, it's an ecosystem, right? And you can't just say, "Oh, I'm only going to deliver on this part of the ecosystem because ... Am I going to do institutions? Am I going to do retail trading?" While the reality is, if you only have retail trading, you're not going to have any liquidity because retail people aren't great at providing liquidity and if you only have institutions, two trading firms don't want to trade against each other all day. They want to trade against retail. So, you really need both sides of it. I do think there will be a pretty substantial change in behavior. One of the problems with Uni V3 is that people aren't moving these positions around and what happens is the positions go out of range and then they forget about it and a week later ...

Actually, people think about, "Oh, okay, the position's out of range. I can just forget about it." But well, really you can't because you're still exposed to that toxicity effect we talked about before, right? If I put in a limit order, even if it's away, market moves through me, I can get filled in the wrong direction. So, it's been a problem in terms of just because it's so expensive to move. Once you put these orders in, it's so expensive to move them around, that people have had a pretty bad user experience and no one's using it in the active price discovery way that I think people were originally hoping that they would. I think this reduces those frictions.

[01:02:26] Patrick: And how do you think about some of the other ancillary things that we've talked about? Like native token, for example. Do you think that that is the right model where there's a Croc token that gives its holders some rights, some incentive to be better participants or spread the word about the exchange? You said it's an ecosystem, a market's an ecosystem, how do you cultivate that ecosystem using the tools in your toolkit?

[01:02:50] Doug: I think the token is definitely the right model. Markets and network, the value of a network scales with the size of a network. So, let's say something like Facebook. Why is Facebook? Well, it has good technology, but it's valuable because I go to Facebook. All my friends are on Facebook. So going back, how much value did the first participants in Facebook add to that company? Well, probably pretty substantial when you think about it because the fact is they got them from zero to 10,000, a million, whatever. That's a huge increase. So, I think native token rewards for your early users align incentives because they are building that network and I think that's the right approach to take.

[01:03:29] Patrick: And what's next for CrocSwap? What do you think are the most interesting decisions to make potential improvements even to your own system? You mentioned Uniswap has already improved up over time.

[01:03:40] Doug: The way I see the single contract Dex is this is the beginning, but I see it as a foundation for improving the technology over time. And it really unlocks a lot of things. A lot of potential that is a lot harder to do in the older architecture. For example, once you have a single contract Dex, all the collateral in the exchange is at a single point. So, one thing that DeFi has not caught up to on the centralized exchanges is trading on margin, trading with leverage, perpetuals. And I think the centralized exchanges have shown there's huge demand to trade with margin.

That's hard to do in a DeFi context, largely because the capital is all over the place in 10,000 different contracts. But once you have a single contract Dex, all the capitals at a single place. So, I think it becomes a lot easier to add that technology on top and margin people, and more importantly, cross margin people between markets. And that becomes pretty critical for price efficiency, because there are a lot of specialized traders who, they might use a lot of leverage, but it's not that risky because they're shorting one asset and going long another asset, but they're very correlated. So, they might be using a lot of capital to bring those two things back in line, but they're not taking that much risk. So, it makes sense for the market to enable them to lever up those positions and increase efficiency that way.

DeFi's Promise
[01:04:58] Patrick: If we abstract away just from these individual decentralized protocols, just to DeFi more broadly, someone that's been such a deep participant in it, how do you think about its promise? Where do you think this all goes over the next five, 10 years? We've talked mostly about infrastructure and how markets function and how they work. We haven't talked much about the things that are actually being traded. I'm just curious, obviously of a history of maybe caring less about what the assets are and more how the market works and how things are connected, but if you step back and look at the promise of DeFi, what do you see? If you think forward five years, what's exciting about what might happen in this ecosystem?

[01:05:33] Doug: To be honest, I think right now it's obviously just crypto assets. We're talking about Bitcoin and Ethereum, but to be honest, I think five, 10 years, there's going to start being real assets start trading on DeFi. And there's no reason it's not, right? There's no reason a stock can't tokenize or at least a portion of its stock and make that into a Tesla. There's no reason we can't have a Tesla token that could trade on CrocSwap the same as any other token. I think it has a number of advantages. The most basic one is just being a globally integrated. Anyone who has a blockchain can access it. There's not barriers across the globe. So, it makes it very easy to access global capital markets. So, I think of something like Turkey, right? If I told you, "Oh this stock in Turkey is really hot. Everyone I know there says, oh it's going to explode." Would you go to Turkey and open a brokerage account? No, you'd never do that. You'd never do that in a million years.

So, especially for middle income countries like that, assets that are out of the way, hard to access, does it necessarily make sense for them to have their own segmented market and run the Borsa Istanbul and deal with all the headaches there? Or does it make sense, let's just tokenize our assets and access the global capital markets? So, one thing I think blockchains are, like any technology, you can look back, but the scalability doubles, 12 months, 18 months, 24 months. So, it's a lot like Moore's law that way. Every computer capacity keeps doubling every two months, bandwidth. Stuff like that often seems like a toy at the beginning. It's like a stupid little toy, we can't run anything. With that kind of exponential improvement, it's not very long until it starts replacing the legacy systems.

[01:07:03] Patrick: What do you think about this as a major threat to NASDAQ and to Nice and to all the other centralized exchanges in crypto, what are the things that might survive this? How do you think the existing players will evolve to match it? What is a better product? Let's just assume all the protections were in place, which is a big assumption I know in crypto world, but let's assume that there was a world in which that was the case. It's hard to argue that capital formation of markets shouldn't be global and 24/7, which obviously decentralized exchanges would bring. So, how do you think NASDAQ, Nice, you've dealt with these institutions a lot in your career, how do you think they'll react?

[01:07:39] Doug: I don't think necessarily it's they have to survive or die. I think you're going to start seeing a lot more technology where DeFi markets can integrate on centralized markets. So, another thing we didn't talk about with CrocSwap is we have technology in place where we can create sponsored pools where it would be some pool that can be created with arbitrary permissions to use the pool, but we'll always have the permissionless pools, but we can also create theoretically sponsored pools where, okay, some  Let's say Binance comes in, right? And Binance says, "We want to access DeFi liquidity." But obviously that's hard to do in the current context, because they can put out in a quote, but they can go to trade against Uniswap and the price might move. But CrocSwap has concept of sponsored pools where Binance can create a Binance pool subject to the approval of the CrocSwap token holders.

And they can say, "Okay, if you want to provide liquidity in the finance pool, you can do that." And because it's on the blockchain, it's very transparent over time. This is how much you're earning. This is how much Binance is giving you, this is whether Binance is pushing you over or not." Binance knows, okay, we can access that liquidity in a permissioned way so we can show those quotes on the Binance exchange. So, if somebody wants to trade, they don't necessarily have to go to CrocSwap, they don't even necessarily have to have their own wallet. They can go to Binance and then access that liquidity and then Binance transparently accesses that liquidity on the back end.

So, cool thing about DeFi is people call it Lego blocks for money. So, it's very composable and I think that's been one of the biggest advantages of the ecosystem as people focused, how do we compose systems rather than one system trying take over, exclude everything else. So, I think the centralized exchanges will find that the technology for them to interface into those liquidity pools on different ways will keep expanding and it'll be an opportunity for those that are open to it.

[01:09:27] Patrick: What about NASDAQ?

[01:09:30] Doug: NASDAQ. There's this whole system in the US called Reg NMS where already this exists, where, okay, if there's a better quote at Nice and NASDAQ's trading it, then NASDAQ has to route your quote to Nice and it makes sure everyone gets like the best quote available. There's no reason you can't have a DeFi exchange that's also eligible for protected quote status, talking about the future.

[01:09:51] Patrick: One thing we haven't talked about in the world of crypto is this concept of MEV, which is an acronym now that seems to kind of be everywhere, but probably most people have no idea what the hell it means. Something to do with the order in which you're going to get filled or participate in a blockchain. Maybe just describe what MEV is and why it's an important concept and how it might fit into this overall ecosystem of DeFi and Dexes, and as you have been doing so nicely, relate it back to some of the points that we've made before.

[01:10:19] Doug: There's a blockchain and traditionally in the network, I create a transaction, propagate that transaction out to everyone in the network, and then minors or validators are actually building the chain, building the blocks on the chain and they have leeway to decide how do I want to construct the next block? So, traditionally when you think back, okay, this is Bitcoin, I'm sending money from Doug to Patrick, and that doesn't necessarily matter too much if the next transfer is reinserted. But with DeFi, we started building more complex systems where minor changes in the order of how transactions are included in the history have huge effects on the profit or trading strategies or anything else. So it's funny, MEV actually stands for Miner Extractable Value.

The miners themselves weren't actually participating in it for a while. It was basically traders who know the miners are very predictable. We always include the highest gas cost thing first and then if there's a tie, we include whatever we see first. How I got into it, where, okay, I'm a trader and I can put out a trade and I know the miner will include it a certain way and then I can get a profit advantage and that might be something. Okay, a big trade's coming in and I want to trade in front of that. Someone's going to buy a ton of Bitcoin, right? Obviously I want trade at the lower price before he pushes the price up. Or it might also be something like, oh, the price is going to dislocate on this one Dex. So I know, okay, this guy's going to push up the price of this Dex and the other Dex is going to have a cheap price. So, let me go buy a Dex B and sell a Dex A and lock in a street profit.

So, there are a number of strategies, but it's the idea of if I'm very good at getting my trade in the right way, then that's a profit opportunity. It ties in pretty nicely with HFT. HFTs are always specializing in, "Oh, I got to be very fast. Execute with very, very high precision." And when you go to Robinhood or whatever, you don't exactly care about the precise ... We want to get a good feel, but exact details don't matter. So, I think of them both as strategies where people who invest a lot in very, very high precision of how their trades or their transactions are executed earn these outsized profits.

So, one of the problems, I think in terms of why each kind is so much, and maybe exists in the first place, is people come up with all kinds of crazy algorithms to prevent it. But to be honest, the user experience hasn't been great in preventing it. It's fairly easy for a lot of these Dexes to prevent people from getting front run or getting attacked, especially the type of MEV where they're losing value. But they're not really built into the front end or the application level, the interface level of the system. So, I think a lot of the way to fix it is build better systems on the front end to stop users from making bad decisions that can be exploited in the first place.

[01:13:03] Patrick: What other meaningful missing pieces of infrastructure are there in the DeFi world in your view today? Especially things that you aren't building or aren't interested in building. Where is the maturity really low and how might we address it?

[01:13:16] Doug: The biggest thing in DeFi that's where the demand exists is there's huge demand for stable coins. At the end of the day, people want dollar back. People want some something that behaves like a crypto asset. Very easy to transfer, very easy to hold, you can secure in a wall, but is pegged to one US dollar, isn't going to fluctuate up and down. Especially middle income countries, right? People want dollar assets in Brazil or Turkey or Nigeria. Don't necessarily have access to the dollar banking system. So, some of the more wild DeFi protocols basically exist to fill this demand for stable coin. There are custodial state coins like Tether or USDC where somebody is depositing money in a bank account and they issue of coin back.

But then there's also this concept of algorithmic stable coins. And we have Dai, which is you deposit over collateralized and you deposit whatever collateral, and then you get back a dollar backed stable coin. There's a mechanism to keep it in line. People are getting into all kinds of crazy mechanisms to just get as many stable coins out there as possible and under collateralize things and things that might behave riskier. So, the biggest thing in the ecosystem is somehow just getting more stable coins out there. I don't even know. Maybe that's central bank, digital currency, but there's huge demand for it. And I think if that demand's not satisfied, people are going to keep doing riskier and riskier things to generate synthetic stable coins.

[01:14:38] Patrick: It sure seems to pretend what you said earlier, which is the demand or desire to have more traditional things on Blockchains. The reasons you want a dollar are not probably dissimilar to the reasons you might want to Tesla coin in your example earlier, I think that's something that's really interesting and something to head. If there's overwhelming demand for effectively a digital dollar, that's probably going to be demand for digital everything. All of a sudden that makes the addressable marketable for blockchains God knows how much bigger. I just find that fascinating.

[01:15:07] Doug: Right, right. I think you'll see more and more assets live on the blockchain or something similar will live on the blockchain. And if you don't give people some avenue to access those, they'll figure out another avenue and might not necessarily be the right way, or riskier, I guess.

[01:15:23] Patrick: I guess. Well, Doug, this has been so much fun. I've in the past, learned so much from what you're building, but also just your experience in the nitty gritty of market infrastructure. I had a conversation a little different than this one with Sam Bankmanfreed from FTX and the subject was kind of similar, the role that infrastructure plays in markets and why lower frictions are so important. And so really excited to see the work you're doing come to light and appreciate you educating us all on HFT and markets and exchanges and decentralized exchanges. I ask everyone the same traditional closing question. What is the kindest thing that anyone's ever done for you?

[01:15:57] Doug: I don't know if it would point to one particular thing, but my dad was always an entrepreneur growing up. And I think he's always encouraged me to go out and build something. Don't necessarily go along a path or just go along where someone else has built something and don't be afraid to try new stuff, take a risk. So, I definitely credit him for a lot of my journey. I don't know if it's necessarily been better, but it's definitely been a lot of fun.

[01:16:23] Patrick: I love it. Well, Doug, thank you so much for your time.

[01:16:25] Doug: Great. Thank you.

This site uses cookies to improve your browsing experience. By using this site, you are consenting to this policy.
